<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tic‑Tac‑Toe</title>
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --accent:#7dd3fc; --accent-2:#60a5fa;
      --muted:#94a3b8; --win:#16a34a; --lose:#ef4444;
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{       
      margin:0; background:linear-gradient(180deg,#071021 0%, #071827 60%); color:#e6eef8; display:flex; align-items:center; justify-content:center; padding:32px;
    }

    .container{width:100%; max-width:720px; background:linear-gradient(180deg,var(--card), #071022); border-radius:14px; padding:20px; box-shadow:0 10px 30px rgba(2,6,23,.6);}

    header{display:flex; align-items:center; justify-content:space-between; gap:12px}
    h1{font-size:1.25rem; margin:0}
    .controls{display:flex; gap:8px; align-items:center}
    button{background:transparent; color:var(--accent); border:1px solid rgba(125,211,252,.12); padding:8px 12px; border-radius:8px; cursor:pointer}
    button:hover{border-color:var(--accent)}

    .board-wrap{display:flex; gap:20px; margin-top:18px; align-items:center; flex-wrap:wrap}
    .board{width:320px; height:320px; display:grid; grid-template-columns:repeat(3,1fr); grid-template-rows:repeat(3,1fr); gap:8px}

    .cell{
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      display:flex; align-items:center; justify-content:center; font-size:3.5rem; border-radius:10px; user-select:none; cursor:pointer; transition:transform .12s ease, box-shadow .12s ease;
      box-shadow: 0 4px 10px rgba(2,6,23,.6) inset;
    }
    .cell:hover{transform:translateY(-3px)}
    .cell.disabled{cursor:default; opacity:0.9}

    .info{flex:1; min-width:220px}
    .status{font-size:0.95rem; color:var(--muted); margin-bottom:12px}
    .score{display:flex; gap:10px; align-items:center}
    .score .box{background:rgba(255,255,255,0.02); padding:10px 12px; border-radius:10px; text-align:center}
    .score .box strong{display:block; font-size:1.15rem}

    .message{margin-top:12px; padding:10px 12px; border-radius:10px; background:rgba(255,255,255,0.02)}
    .message.win{border-left:4px solid var(--win)}
    .message.draw{border-left:4px solid var(--muted)}

    .highlight{background:linear-gradient(90deg,var(--accent), var(--accent-2)); color:#052030; font-weight:700}

    footer{margin-top:16px; color:var(--muted); font-size:0.85rem}

    @media (max-width:640px){
      .board{width:260px; height:260px}
      .cell{font-size:3rem}
      .container{padding:16px}
    }
  </style>
</head>
<body>
  <div class="container" role="application" aria-label="Tic Tac Toe Spiel">
    <header>
      <h1>Tic‑Tac‑Toe</h1>
      <div class="controls">
        <label for="first">Startspieler:</label>
        <select id="first" aria-label="Startspieler auswählen">
          <option value="X">X</option>
          <option value="O">O</option>
        </select>
        <button id="restart">Neustart</button>
        <button id="resetScore">Score zurücksetzen</button>
      </div>
    </header>

    <div class="board-wrap">
      <div class="board" id="board" role="grid" aria-label="Spielbrett">
        <!-- 9 cells generated by JS -->
      </div>

      <aside class="info" aria-live="polite">
        <div class="status">Aktueller Spieler: <strong id="current">X</strong></div>
        <div class="score">
          <div class="box">X<br><strong id="scoreX">0</strong></div>
          <div class="box">O<br><strong id="scoreO">0</strong></div>
          <div class="box">Unentschieden<br><strong id="scoreD">0</strong></div>
        </div>
        <div class="message" id="message">Klicke ein Feld, um zu spielen.</div>
      </aside>
    </div>

    <footer>Bedienung: Klick oder Leertaste/Eingabe auf einer Zelle. Spiel ist lokal für zwei Spieler.</footer>
  </div>

  <script>
    // Spielzustand
    const boardEl = document.getElementById('board');
    const currentEl = document.getElementById('current');
    const messageEl = document.getElementById('message');
    const restartBtn = document.getElementById('restart');
    const resetScoreBtn = document.getElementById('resetScore');
    const firstSelect = document.getElementById('first');
    const scoreXEl = document.getElementById('scoreX');
    const scoreOEl = document.getElementById('scoreO');
    const scoreDEl = document.getElementById('scoreD');

    let board = Array(9).fill(null);
    let current = 'X';
    let running = true;
    let scores = { X: 0, O: 0, D: 0 };

    const winCombos = [
      [0,1,2], [3,4,5], [6,7,8],
      [0,3,6], [1,4,7], [2,5,8],
      [0,4,8], [2,4,6]
    ];

    function createBoard(){
      boardEl.innerHTML = '';
      for(let i=0;i<9;i++){
        const cell = document.createElement('button');
        cell.className = 'cell';
        cell.setAttribute('data-index', i);
        cell.setAttribute('role','gridcell');
        cell.setAttribute('aria-label', `Feld ${i+1}`);
        cell.tabIndex = 0;
        cell.addEventListener('click', onCellClick);
        cell.addEventListener('keydown', onCellKeyDown);
        boardEl.appendChild(cell);
      }
    }

    function onCellClick(e){
      const idx = Number(e.currentTarget.dataset.index);
      makeMove(idx);
    }

    function onCellKeyDown(e){
      if(e.key === 'Enter' || e.key === ' '){
        e.preventDefault();
        const idx = Number(e.currentTarget.dataset.index);
        makeMove(idx);
      }
    }

    function makeMove(idx){
      if(!running) return;
      if(board[idx]) return; // schon belegt
      board[idx] = current;
      const cell = boardEl.querySelector(`[data-index='${idx}']`);
      cell.textContent = current;
      cell.classList.add('disabled');

      const win = checkWin();
      if(win){
        running = false;
        highlightWin(win.combo);
        messageEl.textContent = `Spieler ${current} hat gewonnen!`;
        messageEl.className = 'message win';
        scores[current]++;
        updateScores();
        return;
      }

      if(board.every(v => v !== null)){
        running = false;
        messageEl.textContent = 'Unentschieden.';
        messageEl.className = 'message draw';
        scores.D++;
        updateScores();
        return;
      }

      // Wechsel
      current = current === 'X' ? 'O' : 'X';
      currentEl.textContent = current;
      messageEl.textContent = `Spieler ${current} ist dran.`;
      messageEl.className = 'message';
    }

    function checkWin(){
      for(const combo of winCombos){
        const [a,b,c] = combo;
        if(board[a] && board[a] === board[b] && board[a] === board[c]){
          return { winner: board[a], combo };
        }
      }
      return null;
    }

    function highlightWin(combo){
      combo.forEach(i => {
        const cell = boardEl.querySelector(`[data-index='${i}']`);
        cell.classList.add('highlight');
      });
    }

    function restart(){
      board = Array(9).fill(null);
      running = true;
      current = firstSelect.value;
      currentEl.textContent = current;
      messageEl.textContent = `Spiel gestartet. Spieler ${current} beginnt.`;
      messageEl.className = 'message';
      createBoard();
    }

    function updateScores(){
      scoreXEl.textContent = scores.X;
      scoreOEl.textContent = scores.O;
      scoreDEl.textContent = scores.D;
    }

    restartBtn.addEventListener('click', restart);
    resetScoreBtn.addEventListener('click', () => { scores = {X:0,O:0,D:0}; updateScores(); });
    firstSelect.addEventListener('change', () => { current = firstSelect.value; currentEl.textContent = current; });

    // initialisieren
    createBoard();
    restart();
  </script>
</body>
</html>
